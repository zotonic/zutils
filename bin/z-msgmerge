#!/usr/bin/env python

import os, sys, glob

def cmd(x):
    return os.popen(x, "r").read().strip()


potfiles = cmd("git st|grep modified:|grep template/.*\.pot$|awk '{print $3}'").split("\n")

if not potfiles:
    print "Nothing to do."
    exit()


for potfile in potfiles:
    pofiles = glob.glob(potfile.replace("template/" + os.path.basename(potfile), "*.po"))
    for pofile in pofiles:
        print "msgmerge -U %s %s" % (pofile, potfile)
        #os.system("msgmerge -U %s %s" % (pofile, potfile))


